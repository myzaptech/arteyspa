(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[670],{2218:function(e,r,a){Promise.resolve().then(a.bind(a,1729))},1729:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return c}});var t=a(7437),s=a(2265),n=a(4504),i=a(2869),o=a(6070);function c(){let[e,r]=(0,s.useState)([]),[a,c]=(0,s.useState)([]),[l,d]=(0,s.useState)(!0),[u,g]=(0,s.useState)(null),[m,x]=(0,s.useState)(!1),h=async()=>{d(!0);try{let[e,a]=await Promise.all([(0,n.Xp)(),(0,n.OY)()]);r(e),c(a),g(new Date),console.log("Productos cargados:",e),console.log("Secciones cargadas:",a)}catch(e){console.error("Error cargando datos:",e)}finally{d(!1)}};(0,s.useEffect)(()=>{x(!0),h()},[]);let p=()=>({count:Object.keys(localStorage).length,keys:Object.keys(localStorage)});return m?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 p-8",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl p-8 mb-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"\uD83D\uDD0D Panel de Diagn\xf3stico"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Esta p\xe1gina muestra exactamente qu\xe9 datos est\xe1 retornando Firebase"}),(0,t.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,t.jsx)(i.z,{onClick:h,className:"bg-blue-600 hover:bg-blue-700",children:"\uD83D\uDD04 Recargar desde Firebase"}),(0,t.jsx)(i.z,{onClick:()=>{localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),alert("Cach\xe9 limpiado completamente. Presiona F5 para recargar.")},className:"bg-red-600 hover:bg-red-700",children:"\uD83D\uDDD1️ Limpiar TODO el Cach\xe9"}),(0,t.jsx)(i.z,{onClick:()=>window.location.href="/",className:"bg-green-600 hover:bg-green-700",children:"\uD83C\uDFE0 Ir a P\xe1gina Principal"})]}),u&&(0,t.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["\xdaltima actualizaci\xf3n: ",u.toLocaleTimeString()]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,t.jsxs)(o.Zb,{className:"bg-white shadow-xl",children:[(0,t.jsx)(o.Ol,{className:"bg-purple-600 text-white",children:(0,t.jsxs)(o.ll,{className:"text-2xl",children:["\uD83D\uDCC1 Secciones en Firebase: ",a.length]})}),(0,t.jsx)(o.aY,{className:"p-6",children:l?(0,t.jsx)("p",{className:"text-gray-500",children:"Cargando..."}):0===a.length?(0,t.jsxs)("div",{className:"bg-green-50 border-2 border-green-500 rounded-lg p-4",children:[(0,t.jsx)("p",{className:"text-green-700 font-semibold text-lg",children:"✅ Firebase est\xe1 vac\xedo (correcto)"}),(0,t.jsx)("p",{className:"text-green-600 text-sm mt-2",children:"No hay secciones en la base de datos"})]}):(0,t.jsx)("div",{className:"space-y-3",children:a.map((e,r)=>(0,t.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,t.jsx)("p",{className:"font-bold text-purple-900",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-purple-600",children:["Slug: ",e.slug]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["ID: ",e.id]})]},r))})})]}),(0,t.jsxs)(o.Zb,{className:"bg-white shadow-xl",children:[(0,t.jsx)(o.Ol,{className:"bg-blue-600 text-white",children:(0,t.jsxs)(o.ll,{className:"text-2xl",children:["\uD83D\uDCE6 Productos en Firebase: ",e.length]})}),(0,t.jsx)(o.aY,{className:"p-6",children:l?(0,t.jsx)("p",{className:"text-gray-500",children:"Cargando..."}):0===e.length?(0,t.jsxs)("div",{className:"bg-green-50 border-2 border-green-500 rounded-lg p-4",children:[(0,t.jsx)("p",{className:"text-green-700 font-semibold text-lg",children:"✅ Firebase est\xe1 vac\xedo (correcto)"}),(0,t.jsx)("p",{className:"text-green-600 text-sm mt-2",children:"No hay productos en la base de datos"})]}):(0,t.jsx)("div",{className:"space-y-3",children:e.map((e,r)=>(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,t.jsx)("p",{className:"font-bold text-blue-900",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-blue-600",children:e.subtitle}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["ID: ",e.id]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Secci\xf3n: ",e.sectionId]})]},r))})})]})]}),(0,t.jsxs)(o.Zb,{className:"bg-white shadow-xl mt-8",children:[(0,t.jsx)(o.Ol,{className:"bg-orange-600 text-white",children:(0,t.jsx)(o.ll,{className:"text-2xl",children:"\uD83C\uDF10 Estado del Navegador"})}),(0,t.jsx)(o.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4",children:[(0,t.jsx)("p",{className:"font-semibold text-orange-900 mb-2",children:"localStorage"}),(0,t.jsxs)("p",{className:"text-sm text-orange-700",children:["Items: ",p().count]}),p().count>0&&(0,t.jsx)("div",{className:"mt-2 text-xs text-gray-600",children:p().keys.map(e=>(0,t.jsxs)("div",{className:"truncate",children:["• ",e]},e))})]}),(0,t.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4",children:[(0,t.jsx)("p",{className:"font-semibold text-orange-900 mb-2",children:"sessionStorage"}),(0,t.jsxs)("p",{className:"text-sm text-orange-700",children:["Items: ",Object.keys(sessionStorage).length]})]}),(0,t.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4",children:[(0,t.jsx)("p",{className:"font-semibold text-orange-900 mb-2",children:"Cookies"}),(0,t.jsxs)("p",{className:"text-sm text-orange-700",children:["Items: ",document.cookie.split(";").filter(e=>e.trim()).length]})]})]})})]}),(0,t.jsxs)(o.Zb,{className:"bg-yellow-50 border-2 border-yellow-400 shadow-xl mt-8",children:[(0,t.jsx)(o.Ol,{children:(0,t.jsx)(o.ll,{className:"text-2xl text-yellow-900",children:"\uD83D\uDCA1 \xbfSigues viendo datos fantasma?"})}),(0,t.jsxs)(o.aY,{className:"p-6",children:[(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-3 text-gray-700",children:[(0,t.jsx)("li",{className:"font-semibold",children:'Haz clic en "Limpiar TODO el Cach\xe9" arriba'}),(0,t.jsxs)("li",{className:"font-semibold",children:["Presiona ",(0,t.jsx)("kbd",{className:"px-2 py-1 bg-gray-200 rounded",children:"Ctrl"})," + ",(0,t.jsx)("kbd",{className:"px-2 py-1 bg-gray-200 rounded",children:"Shift"})," + ",(0,t.jsx)("kbd",{className:"px-2 py-1 bg-gray-200 rounded",children:"R"})," para forzar recarga"]}),(0,t.jsx)("li",{className:"font-semibold",children:'Abre las DevTools (F12), ve a la pesta\xf1a "Application" → "Clear storage" → "Clear site data"'}),(0,t.jsx)("li",{className:"font-semibold",children:"Si nada funciona: Cierra el navegador completamente y vuelve a abrirlo"})]}),(0,t.jsx)("div",{className:"mt-6 p-4 bg-white rounded-lg border border-yellow-300",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,t.jsx)("strong",{children:"Nota:"}),' Esta p\xe1gina muestra los datos REALES de Firebase en tiempo real. Si aqu\xed ves "✅ Firebase est\xe1 vac\xedo" pero la p\xe1gina principal muestra productos, entonces es 100% cach\xe9 del navegador.']})})]})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 p-8 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-white text-2xl",children:"Cargando diagn\xf3stico..."})})}},2869:function(e,r,a){"use strict";a.d(r,{z:function(){return c}});var t=a(7437);a(2265);var s=a(5293),n=a(535),i=a(4508);let o=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:r,variant:a,size:n,asChild:c=!1,...l}=e,d=c?s.g7:"button";return(0,t.jsx)(d,{"data-slot":"button",className:(0,i.cn)(o({variant:a,size:n,className:r})),...l})}},6070:function(e,r,a){"use strict";a.d(r,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return n},aY:function(){return l},ll:function(){return o}});var t=a(7437);a(2265);var s=a(4508);function n(e){let{className:r,...a}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...a})}function i(e){let{className:r,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...a})}function o(e){let{className:r,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",r),...a})}function c(e){let{className:r,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",r),...a})}function l(e){let{className:r,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",r),...a})}},4504:function(e,r,a){"use strict";a.d(r,{gK:function(){return u},qG:function(){return h},Ir:function(){return m},bL:function(){return f},F$:function(){return p},Xp:function(){return d},OY:function(){return x},nM:function(){return g},jx:function(){return b}});var t=a(738),s=a(5978),n=a(6485),i=a(1466);let o=0===(0,t.C6)().length?(0,t.ZF)({apiKey:"AIzaSyA5bYwm-ZloEdpnAZAtLRNMHYGs9O8Yezg",authDomain:"data-spa.firebaseapp.com",projectId:"data-spa",storageBucket:"data-spa.firebasestorage.app",messagingSenderId:"1036421671504",appId:"1:1036421671504:web:a173fa80cafb2f67b87f55",measurementId:"G-EB260DTHVM"}):(0,t.C6)()[0],c=(0,s.ad)(o),l=(0,n.cF)(o);(0,i.v0)(o);let d=async()=>{try{let{collection:e,getDocs:r}=await Promise.resolve().then(a.bind(a,5978));return(await r(e(c,"products"))).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error fetching products from Firebase:",e),[]}},u=async e=>{try{let{collection:r,addDoc:t}=await Promise.resolve().then(a.bind(a,5978));return(await t(r(c,"products"),e)).id}catch(e){return console.error("Error adding product to Firebase:",e),null}},g=async(e,r)=>{try{let{doc:t,updateDoc:s}=await Promise.resolve().then(a.bind(a,5978));return await s(t(c,"products",e),r),!0}catch(e){return console.error("Error updating product in Firebase:",e),!1}},m=async e=>{try{let{doc:r,deleteDoc:t}=await Promise.resolve().then(a.bind(a,5978));return await t(r(c,"products",e)),!0}catch(e){return console.error("Error deleting product from Firebase:",e),!1}},x=async()=>{try{let{collection:e,getDocs:r}=await Promise.resolve().then(a.bind(a,5978));return(await r(e(c,"productSections"))).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error fetching sections from Firebase:",e),[]}},h=async e=>{try{let{collection:r,addDoc:t}=await Promise.resolve().then(a.bind(a,5978));return(await t(r(c,"productSections"),e)).id}catch(e){return console.error("Error adding section:",e),null}},p=async e=>{try{let{doc:r,deleteDoc:t}=await Promise.resolve().then(a.bind(a,5978));return await t(r(c,"productSections",e)),!0}catch(e){return console.error("Error deleting section from Firebase:",e),!1}},b=async(e,r)=>{try{let{ref:t,uploadBytes:s,getDownloadURL:n}=await Promise.resolve().then(a.bind(a,6485)),i=Date.now(),o="products/".concat(r.replace(/\s+/g,"_"),"_").concat(i,".").concat(e.name.split(".").pop()),c=t(l,o),d=await s(c,e);return await n(d.ref)}catch(e){return console.error("Error uploading image:",e),null}},f=async e=>{try{let{ref:r,deleteObject:t}=await Promise.resolve().then(a.bind(a,6485)),s=new URL(e),n=s.pathname.indexOf("/o/")+3,i=s.pathname.indexOf("?"),o=decodeURIComponent(s.pathname.substring(n,i)),c=r(l,o);return await t(c),!0}catch(e){return console.error("Error deleting image:",e),!1}}},4508:function(e,r,a){"use strict";a.d(r,{cn:function(){return n}});var t=a(1994),s=a(3335);function n(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,s.m6)((0,t.W)(r))}}},function(e){e.O(0,[609,210,50,305,971,117,744],function(){return e(e.s=2218)}),_N_E=e.O()}]);