(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[427],{6980:function(e,r,t){Promise.resolve().then(t.bind(t,1875))},1875:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return y}});var a=t(7437),s=t(2265),n=t(9376),i=t(2869),o=t(6070),l=t(5186),c=t(8850),d=t(4508);let u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s})});u.displayName="Textarea";var m=t(5515),x=t.n(m),g=t(4504);let h=e=>{let{className:r}=e;return(0,a.jsx)("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})},p=e=>{let{className:r}=e;return(0,a.jsx)("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})},b=e=>{let{className:r}=e;return(0,a.jsx)("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})},f=e=>{let{className:r}=e;return(0,a.jsx)("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7.862a2 2 0 01-1.995-1.858L5 7m12 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})},v=e=>{let{className:r}=e;return(0,a.jsx)("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})},j=e=>{let{className:r}=e;return(0,a.jsxs)("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})]})},N=e=>{let{className:r}=e;return(0,a.jsx)("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3-3-3m3-3v12"})})},w=e=>{let{className:r}=e;return(0,a.jsx)("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})},C=e=>{let{className:r}=e;return(0,a.jsx)("svg",{className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})};function y(){let[e,r]=(0,s.useState)(!1),[t,c]=(0,s.useState)("products"),[d,u]=(0,s.useState)([]),[m,N]=(0,s.useState)([]),[w,C]=(0,s.useState)(null),[y,E]=(0,s.useState)(""),[B,S]=(0,s.useState)(!0),[D,A]=(0,s.useState)({}),L=(0,n.useRouter)();(0,s.useEffect)(()=>{localStorage.getItem("artespa_admin")?(r(!0),P()):L.push("/admin/login")},[L]);let P=async()=>{S(!0);try{let[e,r]=await Promise.all([(0,g.Xp)(),(0,g.OY)()]);u(e),N(r);let t=z(e);A(t)}catch(e){console.error("Error loading data:",e),await x().fire({title:"Error",text:"Error al cargar los datos. Por favor, recarga la p\xe1gina.",icon:"error",confirmButtonColor:"#406577"})}finally{S(!1)}},z=e=>{let r={};e.forEach(e=>{let t=e.name.toLowerCase().trim();r[t]||(r[t]=[]),r[t].push(e)});let t={};return Object.entries(r).forEach(e=>{let[r,a]=e;a.length>1&&(t[r]=a)}),t},I=async e=>{try{if(w&&w.id)await (0,g.nM)(w.id,e)?(u(d.map(r=>r.id===w.id?{...e,id:w.id}:r)),await x().fire({title:"\xa1Actualizado!",text:"El producto ha sido actualizado exitosamente",icon:"success",confirmButtonColor:"#406577",timer:2e3})):await x().fire({title:"Error",text:"No se pudo actualizar el producto",icon:"error",confirmButtonColor:"#406577"});else{let r=await (0,g.gK)(e);if(r){let t={...e,id:r};u([...d,t]),await x().fire({title:"\xa1Agregado!",text:"El producto ha sido agregado exitosamente",icon:"success",confirmButtonColor:"#406577",timer:2e3})}else await x().fire({title:"Error",text:"No se pudo agregar el producto",icon:"error",confirmButtonColor:"#406577"})}C(null)}catch(e){console.error("Error saving product:",e),await x().fire({title:"Error",text:"Ocurri\xf3 un error al guardar el producto",icon:"error",confirmButtonColor:"#406577"})}},F=async e=>{if((await x().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n eliminar\xe1 el producto permanentemente",icon:"warning",showCancelButton:!0,confirmButtonColor:"#406577",cancelButtonColor:"#d33",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{await (0,g.Ir)(e)?(u(d.filter(r=>r.id!==e)),await x().fire({title:"\xa1Eliminado!",text:"El producto ha sido eliminado exitosamente",icon:"success",confirmButtonColor:"#406577",timer:2e3})):await x().fire({title:"Error",text:"No se pudo eliminar el producto",icon:"error",confirmButtonColor:"#406577"})}catch(e){console.error("Error deleting product:",e),await x().fire({title:"Error",text:"Ocurri\xf3 un error al eliminar el producto",icon:"error",confirmButtonColor:"#406577"})}},O=async()=>{if(y.trim())try{let e={name:y.trim(),slug:y.trim().toLowerCase().replace(/\s+/g,"-"),createdAt:new Date},r=await (0,g.qG)(e);if(r){let t={...e,id:r};N([...m,t]),E(""),await x().fire({title:"\xa1Creada!",text:"La secci\xf3n ha sido agregada exitosamente",icon:"success",confirmButtonColor:"#406577",timer:2e3})}else await x().fire({title:"Error",text:"No se pudo agregar la secci\xf3n",icon:"error",confirmButtonColor:"#406577"})}catch(e){console.error("Error adding section:",e),await x().fire({title:"Error",text:"Ocurri\xf3 un error al agregar la secci\xf3n",icon:"error",confirmButtonColor:"#406577"})}},M=async e=>{if((await x().fire({title:"\xbfEst\xe1s seguro?",text:"Esto podr\xeda afectar los productos asociados a esta secci\xf3n",icon:"warning",showCancelButton:!0,confirmButtonColor:"#406577",cancelButtonColor:"#d33",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{await (0,g.F$)(e)?(N(m.filter(r=>r.id!==e)),await x().fire({title:"\xa1Eliminada!",text:"La secci\xf3n ha sido eliminada exitosamente de Firebase",icon:"success",confirmButtonColor:"#406577",timer:2e3})):await x().fire({title:"Error",text:"No se pudo eliminar la secci\xf3n de Firebase",icon:"error",confirmButtonColor:"#406577"})}catch(e){console.error("Error deleting section:",e),await x().fire({title:"Error",text:"Ocurri\xf3 un error al eliminar la secci\xf3n",icon:"error",confirmButtonColor:"#406577"})}},_=async(e,r)=>{if((await x().fire({title:"\xbfEliminar duplicados?",html:"\n        <p>Se encontraron <strong>".concat(r.length,'</strong> copias de "<strong>').concat(e,'</strong>"</p>\n        <p>Se mantendr\xe1 <strong>1 producto</strong> y se eliminar\xe1n <strong>').concat(r.length-1," duplicados</strong></p>\n      "),icon:"warning",showCancelButton:!0,confirmButtonColor:"#406577",cancelButtonColor:"#d33",confirmButtonText:"S\xed, eliminar duplicados",cancelButtonText:"Cancelar"})).isConfirmed)try{let e=r.slice(1),t=0;for(let r of e)r.id&&await (0,g.Ir)(r.id)&&t++;t>0?(await x().fire({title:"\xa1Duplicados eliminados!",text:"Se eliminaron ".concat(t," productos duplicados exitosamente"),icon:"success",confirmButtonColor:"#406577",timer:2e3}),await P()):await x().fire({title:"Error",text:"No se pudieron eliminar los duplicados",icon:"error",confirmButtonColor:"#406577"})}catch(e){console.error("Error removing duplicates:",e),await x().fire({title:"Error",text:"Ocurri\xf3 un error al eliminar los duplicados",icon:"error",confirmButtonColor:"#406577"})}};return e?B?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(135deg, \n          rgba(64, 101, 119, 0.95) 0%, \n          rgba(132, 174, 188, 0.9) 50%, \n          rgba(199, 209, 216, 0.85) 100%)"},children:(0,a.jsx)("div",{className:"text-[#406577] text-xl",children:"Cargando datos..."})}):(0,a.jsxs)("div",{className:"min-h-screen",style:{background:"linear-gradient(135deg, \n        rgba(64, 101, 119, 0.95) 0%, \n        rgba(132, 174, 188, 0.9) 50%, \n        rgba(199, 209, 216, 0.85) 100%)"},children:[(0,a.jsx)("div",{className:"border-b",style:{background:"linear-gradient(135deg, \n          rgba(199, 209, 216, 0.15) 0%, \n          rgba(132, 174, 188, 0.1) 100%)",backdropFilter:"blur(12px)",borderColor:"rgba(199, 209, 216, 0.3)"},children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("img",{src:"/logo.png",alt:"Arte y Spa Logo",className:"h-10 md:h-12 w-auto object-contain",style:{clipPath:"inset(8% 8% 8% 8%)"}}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-[#406577]",children:"Panel de Administraci\xf3n - Arte y Spa"})]}),(0,a.jsxs)(i.z,{onClick:()=>{localStorage.removeItem("artespa_admin"),L.push("/admin/login")},variant:"outline",className:"border-[#C7D1D8]/40 text-[#406577] hover:bg-[#C7D1D8]/20 bg-transparent",children:[(0,a.jsx)(f,{className:"mr-2 h-4 w-4"}),"Cerrar Sesi\xf3n"]})]})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto p-4",children:[(0,a.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,a.jsxs)(i.z,{onClick:()=>c("products"),variant:"products"===t?"default":"outline",className:"products"===t?"bg-gradient-to-r from-[#84AEBC] to-[#406577] text-white":"border-[#C7D1D8]/40 text-[#406577] hover:bg-[#C7D1D8]/20",children:[(0,a.jsx)(v,{className:"mr-2 h-4 w-4"}),"Productos (",d.length,")"]}),(0,a.jsxs)(i.z,{onClick:()=>c("sections"),variant:"sections"===t?"default":"outline",className:"sections"===t?"bg-gradient-to-r from-[#84AEBC] to-[#406577] text-white":"border-[#C7D1D8]/40 text-[#406577] hover:bg-[#C7D1D8]/20",children:[(0,a.jsx)(j,{className:"mr-2 h-4 w-4"}),"Secciones (",m.length,")"]}),(0,a.jsxs)(i.z,{onClick:()=>c("duplicates"),variant:"duplicates"===t?"default":"outline",className:"duplicates"===t?"bg-gradient-to-r from-[#84AEBC] to-[#406577] text-white":"border-[#C7D1D8]/40 text-[#406577] hover:bg-[#C7D1D8]/20",children:[(0,a.jsx)(b,{className:"mr-2 h-4 w-4"}),"Duplicados (",Object.keys(D).length,")"]})]}),"products"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-[#406577]",children:"Gesti\xf3n de Productos"}),(0,a.jsxs)(i.z,{onClick:()=>C({}),className:"bg-gradient-to-r from-[#84AEBC] to-[#406577] text-white",children:[(0,a.jsx)(h,{className:"mr-2 h-4 w-4"}),"Nuevo Producto"]})]}),w&&(0,a.jsx)(k,{product:w,sections:m,onSave:I,onCancel:()=>C(null)}),0===d.length?(0,a.jsx)(o.Zb,{style:{background:"linear-gradient(135deg, \n                  rgba(199, 209, 216, 0.15) 0%, \n                  rgba(132, 174, 188, 0.1) 100%)",backdropFilter:"blur(12px)",borderColor:"rgba(199, 209, 216, 0.3)"},children:(0,a.jsxs)(o.aY,{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-[#406577] text-lg",children:"No hay productos registrados"}),(0,a.jsx)("p",{className:"text-[#84AEBC] text-sm",children:'Agrega tu primer producto usando el bot\xf3n "Nuevo Producto"'})]})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>{var r;return(0,a.jsxs)(o.Zb,{style:{background:"linear-gradient(135deg, \n                      rgba(199, 209, 216, 0.15) 0%, \n                      rgba(132, 174, 188, 0.1) 100%)",backdropFilter:"blur(12px)",borderColor:"rgba(199, 209, 216, 0.3)"},children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)("img",{src:e.image||"/placeholder.svg",alt:e.name,className:"w-full h-32 object-cover rounded"}),(0,a.jsx)(o.ll,{className:"text-[#406577]",children:e.name}),(0,a.jsxs)(o.SZ,{className:"text-[#84AEBC]",children:[(null===(r=m.find(r=>r.id===e.sectionId))||void 0===r?void 0:r.name)||"Sin secci\xf3n"," - ",e.category]})]}),(0,a.jsxs)(o.aY,{children:[(0,a.jsx)("p",{className:"text-[#406577] text-sm mb-4 line-clamp-3",children:e.description}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.z,{size:"sm",onClick:()=>C(e),className:"bg-[#84AEBC] hover:bg-[#406577] text-white",children:(0,a.jsx)(p,{className:"h-4 w-4"})}),(0,a.jsx)(i.z,{size:"sm",variant:"destructive",onClick:()=>e.id&&F(e.id),children:(0,a.jsx)(b,{className:"h-4 w-4"})})]})]})]},e.id)})})]}),"sections"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-[#406577]",children:"Gesti\xf3n de Secciones"}),(0,a.jsxs)(o.Zb,{style:{background:"linear-gradient(135deg, \n                rgba(199, 209, 216, 0.15) 0%, \n                rgba(132, 174, 188, 0.1) 100%)",backdropFilter:"blur(12px)",borderColor:"rgba(199, 209, 216, 0.3)"},children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{className:"text-[#406577]",children:"Agregar Nueva Secci\xf3n"}),(0,a.jsx)(o.SZ,{className:"text-[#84AEBC]",children:"Las secciones te permiten organizar tus productos en categor\xedas personalizadas"})]}),(0,a.jsx)(o.aY,{children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l.I,{value:y,onChange:e=>E(e.target.value),placeholder:"Nombre de la secci\xf3n (ej: Vasos, Ropa)",className:"bg-white/20 border-[#C7D1D8]/40 text-[#406577]",onKeyPress:e=>"Enter"===e.key&&O()}),(0,a.jsx)(i.z,{onClick:O,className:"bg-gradient-to-r from-[#84AEBC] to-[#406577] text-white",disabled:!y.trim(),children:(0,a.jsx)(h,{className:"h-4 w-4"})})]})})]}),0===m.length?(0,a.jsx)(o.Zb,{style:{background:"linear-gradient(135deg, \n                  rgba(199, 209, 216, 0.15) 0%, \n                  rgba(132, 174, 188, 0.1) 100%)",backdropFilter:"blur(12px)",borderColor:"rgba(199, 209, 216, 0.3)"},children:(0,a.jsxs)(o.aY,{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-[#406577] text-lg",children:"No hay secciones registradas"}),(0,a.jsx)("p",{className:"text-[#84AEBC] text-sm",children:"Crea tu primera secci\xf3n para organizar tus productos"})]})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(e=>(0,a.jsxs)(o.Zb,{style:{background:"linear-gradient(135deg, \n                      rgba(199, 209, 216, 0.15) 0%, \n                      rgba(132, 174, 188, 0.1) 100%)",backdropFilter:"blur(12px)",borderColor:"rgba(199, 209, 216, 0.3)"},children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{className:"text-[#406577]",children:e.name}),(0,a.jsxs)(o.SZ,{className:"text-[#84AEBC]",children:[d.filter(r=>r.sectionId===e.id).length," productos"]})]}),(0,a.jsx)(o.aY,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-[#84AEBC] text-sm",children:["Slug: ",e.slug]}),(0,a.jsxs)(i.z,{size:"sm",variant:"destructive",onClick:()=>e.id&&M(e.id),children:[(0,a.jsx)(b,{className:"h-4 w-4 mr-2"}),"Eliminar"]})]})})]},e.id))})]}),"duplicates"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-[#406577]",children:"Gesti\xf3n de Duplicados"}),0===Object.keys(D).length?(0,a.jsx)(o.Zb,{style:{background:"linear-gradient(135deg, \n                  rgba(199, 209, 216, 0.15) 0%, \n                  rgba(132, 174, 188, 0.1) 100%)",backdropFilter:"blur(12px)",borderColor:"rgba(199, 209, 216, 0.3)"},children:(0,a.jsxs)(o.aY,{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-[#406577] text-lg",children:"✅ No hay productos duplicados"}),(0,a.jsx)("p",{className:"text-[#84AEBC] text-sm",children:"Todos los productos tienen nombres \xfanicos"})]})}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(o.Zb,{style:{background:"linear-gradient(135deg, \n                    rgba(199, 209, 216, 0.15) 0%, \n                    rgba(132, 174, 188, 0.1) 100%)",backdropFilter:"blur(12px)",borderColor:"rgba(199, 209, 216, 0.3)"},children:(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{className:"text-[#406577]",children:"⚠️ Productos Duplicados Detectados"}),(0,a.jsxs)(o.SZ,{className:"text-[#84AEBC]",children:["Se encontraron ",Object.keys(D).length," grupos de productos con nombres duplicados. Para cada grupo, se mantendr\xe1 un producto y se eliminar\xe1n los dem\xe1s."]})]})}),Object.entries(D).map(e=>{var r;let[t,s]=e;return(0,a.jsxs)(o.Zb,{style:{background:"linear-gradient(135deg, \n                      rgba(255, 200, 200, 0.15) 0%, \n                      rgba(255, 150, 150, 0.1) 100%)",backdropFilter:"blur(12px)",borderColor:"rgba(255, 100, 100, 0.3)"},children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"text-[#406577] flex items-center justify-between",children:[(0,a.jsx)("span",{children:s[0].name}),(0,a.jsxs)("span",{className:"text-red-600 text-sm font-normal",children:[s.length," copias"]})]}),(0,a.jsxs)(o.SZ,{className:"text-[#84AEBC]",children:["Secci\xf3n: ",(null===(r=m.find(e=>e.id===s[0].sectionId))||void 0===r?void 0:r.name)||"Sin secci\xf3n"]})]}),(0,a.jsx)(o.aY,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:s.map((e,r)=>(0,a.jsx)("div",{className:"p-3 rounded border ".concat(0===r?"bg-green-50/50 border-green-300":"bg-red-50/50 border-red-300"),children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("img",{src:e.image||"/placeholder.svg",alt:e.name,className:"w-16 h-16 object-cover rounded"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-[#406577] truncate",children:0===r?"✅ Se mantendr\xe1":"❌ Se eliminar\xe1"}),(0,a.jsx)("p",{className:"text-xs text-[#84AEBC] truncate",children:e.subtitle}),(0,a.jsxs)("p",{className:"text-xs text-[#84AEBC]",children:["ID: ",e.id]})]})]})},e.id))}),(0,a.jsxs)(i.z,{onClick:()=>_(s[0].name,s),className:"w-full bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white",children:[(0,a.jsx)(b,{className:"mr-2 h-4 w-4"}),"Eliminar ",s.length-1," Duplicado",s.length-1>1?"s":""]})]})})]},t)})]})]})]})]}):(0,a.jsx)("div",{children:"Cargando..."})}function k(e){let{product:r,sections:t,onSave:n,onCancel:d}=e,[m,h]=(0,s.useState)({name:r.name||"",subtitle:r.subtitle||"",description:r.description||"",image:r.image||"",category:r.category||"",sectionId:r.sectionId||""}),[p,b]=(0,s.useState)(null),[f,v]=(0,s.useState)(r.image||""),[j,y]=(0,s.useState)(!1),k=async e=>{if(e.preventDefault(),!m.name||!m.description||!m.sectionId){await x().fire({title:"Campos incompletos",text:"Por favor completa todos los campos requeridos",icon:"warning",confirmButtonColor:"#406577"});return}y(!0);let t=m.image;try{if(p){let e=await (0,g.jx)(p,m.name);if(e)t=e,r.id&&r.image&&r.image!==t&&await (0,g.bL)(r.image);else{await x().fire({title:"Error",text:"No se pudo subir la imagen",icon:"error",confirmButtonColor:"#406577"}),y(!1);return}}n({...m,image:t})}catch(e){console.error("Error saving product:",e),await x().fire({title:"Error",text:"Ocurri\xf3 un error al guardar el producto",icon:"error",confirmButtonColor:"#406577"})}finally{y(!1)}};return(0,a.jsxs)(o.Zb,{style:{background:"linear-gradient(135deg, \n        rgba(199, 209, 216, 0.15) 0%, \n        rgba(132, 174, 188, 0.1) 100%)",backdropFilter:"blur(12px)",borderColor:"rgba(199, 209, 216, 0.3)"},children:[(0,a.jsx)(o.Ol,{children:(0,a.jsx)(o.ll,{className:"text-[#406577]",children:r.id?"Editar Producto":"Nuevo Producto"})}),(0,a.jsx)(o.aY,{children:(0,a.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{className:"text-[#406577]",children:"Nombre del Producto *"}),(0,a.jsx)(l.I,{value:m.name,onChange:e=>h({...m,name:e.target.value}),className:"bg-white/20 border-[#C7D1D8]/40 text-[#406577]",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{className:"text-[#406577]",children:"Subt\xedtulo"}),(0,a.jsx)(l.I,{value:m.subtitle,onChange:e=>h({...m,subtitle:e.target.value}),className:"bg-white/20 border-[#C7D1D8]/40 text-[#406577]",placeholder:"ej: ABUNDANCIA - Fluye lo justo"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{className:"text-[#406577]",children:"Categor\xeda"}),(0,a.jsx)(l.I,{value:m.category,onChange:e=>h({...m,category:e.target.value}),className:"bg-white/20 border-[#C7D1D8]/40 text-[#406577]",placeholder:"ej: arcangeles, terapeuticas"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{className:"text-[#406577]",children:"Secci\xf3n *"}),(0,a.jsxs)("select",{value:m.sectionId,onChange:e=>h({...m,sectionId:e.target.value}),className:"w-full p-2 rounded bg-white/20 border border-[#C7D1D8]/40 text-[#406577]",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Seleccionar secci\xf3n"}),t.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{className:"text-[#406577]",children:"Imagen del Producto"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var r;let t=null===(r=e.target.files)||void 0===r?void 0:r[0];if(t){b(t);let e=new FileReader;e.onload=e=>{var r;v(null===(r=e.target)||void 0===r?void 0:r.result)},e.readAsDataURL(t)}},className:"hidden",id:"image-upload"}),(0,a.jsxs)(i.z,{type:"button",onClick:()=>{var e;return null===(e=document.getElementById("image-upload"))||void 0===e?void 0:e.click()},className:"bg-[#84AEBC] hover:bg-[#406577] text-white",disabled:j,children:[(0,a.jsx)(w,{className:"mr-2 h-4 w-4"}),p?"Cambiar Imagen":"Seleccionar Imagen"]}),p&&(0,a.jsx)("span",{className:"text-[#406577] text-sm",children:p.name})]}),f&&(0,a.jsxs)("div",{className:"relative inline-block",children:[(0,a.jsx)("img",{src:f||"/placeholder.svg",alt:"Preview",className:"w-32 h-32 object-cover rounded border"}),(0,a.jsx)(i.z,{type:"button",size:"sm",variant:"destructive",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full p-0",onClick:()=>{b(null),v(""),h({...m,image:""})},children:(0,a.jsx)(C,{className:"h-3 w-3"})})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{className:"text-[#406577]",children:"Descripci\xf3n *"}),(0,a.jsx)(u,{value:m.description,onChange:e=>h({...m,description:e.target.value}),className:"bg-white/20 border-[#C7D1D8]/40 text-[#406577]",rows:4,required:!0})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(i.z,{type:"submit",className:"bg-gradient-to-r from-[#84AEBC] to-[#406577] text-white",disabled:j,children:[(0,a.jsx)(N,{className:"mr-2 h-4 w-4"}),j?"Guardando...":"Guardar"]}),(0,a.jsx)(i.z,{type:"button",variant:"outline",onClick:d,className:"border-[#C7D1D8]/40 text-[#406577] bg-transparent",disabled:j,children:"Cancelar"})]})]})})]})}},2869:function(e,r,t){"use strict";t.d(r,{z:function(){return l}});var a=t(7437);t(2265);var s=t(5293),n=t(535),i=t(4508);let o=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:r,variant:t,size:n,asChild:l=!1,...c}=e,d=l?s.g7:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,i.cn)(o({variant:t,size:n,className:r})),...c})}},6070:function(e,r,t){"use strict";t.d(r,{Ol:function(){return i},SZ:function(){return l},Zb:function(){return n},aY:function(){return c},ll:function(){return o}});var a=t(7437);t(2265);var s=t(4508);function n(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...t})}function i(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...t})}function o(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",r),...t})}function l(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",r),...t})}function c(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",r),...t})}},5186:function(e,r,t){"use strict";t.d(r,{I:function(){return n}});var a=t(7437);t(2265);var s=t(4508);function n(e){let{className:r,type:t,...n}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...n})}},8850:function(e,r,t){"use strict";t.d(r,{_:function(){return c}});var a=t(7437),s=t(2265);t(4887);var n=t(5293),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,r)=>{let t=s.forwardRef((e,t)=>{let{asChild:s,...i}=e,o=s?n.g7:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(o,{...i,ref:t})});return t.displayName=`Primitive.${r}`,{...e,[r]:t}},{}),o=s.forwardRef((e,r)=>(0,a.jsx)(i.label,{...e,ref:r,onMouseDown:r=>{var t;r.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));o.displayName="Label";var l=t(4508);function c(e){let{className:r,...t}=e;return(0,a.jsx)(o,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...t})}},4504:function(e,r,t){"use strict";t.d(r,{gK:function(){return d},qG:function(){return g},Ir:function(){return m},bL:function(){return b},F$:function(){return h},Xp:function(){return c},OY:function(){return x},nM:function(){return u},jx:function(){return p}});var a=t(738),s=t(5978),n=t(6485),i=t(1466);let o=0===(0,a.C6)().length?(0,a.ZF)({apiKey:"AIzaSyA5bYwm-ZloEdpnAZAtLRNMHYGs9O8Yezg",authDomain:"data-spa.firebaseapp.com",projectId:"data-spa",storageBucket:"data-spa.firebasestorage.app",messagingSenderId:"1036421671504",appId:"1:1036421671504:web:a173fa80cafb2f67b87f55",measurementId:"G-EB260DTHVM"}):(0,a.C6)()[0],l=(0,s.ad)(o);(0,n.cF)(o),(0,i.v0)(o);let c=async()=>{try{let{collection:e,getDocs:r}=await Promise.resolve().then(t.bind(t,5978));return(await r(e(l,"products"))).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error fetching products from Firebase:",e),[]}},d=async e=>{try{let{collection:r,addDoc:a}=await Promise.resolve().then(t.bind(t,5978));return(await a(r(l,"products"),e)).id}catch(e){return console.error("Error adding product to Firebase:",e),null}},u=async(e,r)=>{try{let{doc:a,updateDoc:s}=await Promise.resolve().then(t.bind(t,5978));return await s(a(l,"products",e),r),!0}catch(e){return console.error("Error updating product in Firebase:",e),!1}},m=async e=>{try{let{doc:r,deleteDoc:a}=await Promise.resolve().then(t.bind(t,5978));return await a(r(l,"products",e)),!0}catch(e){return console.error("Error deleting product from Firebase:",e),!1}},x=async()=>{try{let{collection:e,getDocs:r}=await Promise.resolve().then(t.bind(t,5978));return(await r(e(l,"productSections"))).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error fetching sections from Firebase:",e),[]}},g=async e=>{try{let{collection:r,addDoc:a}=await Promise.resolve().then(t.bind(t,5978));return(await a(r(l,"productSections"),e)).id}catch(e){return console.error("Error adding section:",e),null}},h=async e=>{try{let{doc:r,deleteDoc:a}=await Promise.resolve().then(t.bind(t,5978));return await a(r(l,"productSections",e)),!0}catch(e){return console.error("Error deleting section from Firebase:",e),!1}},p=async(e,r)=>{try{return new Promise((r,t)=>{let a=new FileReader;a.onloadend=()=>{r(a.result)},a.onerror=()=>{t(Error("Failed to read file"))},a.readAsDataURL(e)})}catch(e){return console.error("Error uploading image:",e),null}},b=async e=>!0},4508:function(e,r,t){"use strict";t.d(r,{cn:function(){return n}});var a=t(1994),s=t(3335);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,a.W)(r))}},9376:function(e,r,t){"use strict";var a=t(5475);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[609,210,461,50,305,971,117,744],function(){return e(e.s=6980)}),_N_E=e.O()}]);